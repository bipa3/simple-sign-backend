<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bitedu.bipa.simplesignbackend.mapper.CommonMapper">

    <select id="getCompanyList" resultType="bitedu.bipa.simplesignbackend.model.dto.CompanyDTO">
        select comp_id as id, comp_name as name from company;
    </select>

    <!--해당 사용자의 소속 조직(부서,사업장,회사) 검색-->
    <select id="getBelongs" resultType="BelongOrganizationDTO" parameterType="int">
        select t1.user_id, t1.dept_id, t2.comp_id, t3.est_id
        from organization_user t1
        left join
        company t2 on t1.comp_name = t2.comp_name
        left join
        establishment t3 on t1.est_name = t3.est_name
        where user_id = #{userId};
    </select>

    <select id="getLastInsertId" resultType="int">
        SELECT LAST_INSERT_ID()
    </select>

<!--    <select id="getMember" resultType="Member">-->
<!--        select * from member where id = #{id}-->
<!--    </select>-->

<!--    <insert id="createMember">-->
<!--        insert into member(name, id) values(#{name}, #{id})-->
<!--    </insert>-->

<!--    <delete id="deleteMember">-->
<!--        delete from member-->
<!--        where id = #{id}-->
<!--    </delete>-->

<!--    <update id="updateMember">-->
<!--        update member set name = #{name}-->
<!--        where id = #{id}-->
<!--    </update>-->

</mapper>